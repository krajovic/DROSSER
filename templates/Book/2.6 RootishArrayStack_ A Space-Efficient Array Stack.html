<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0073)http://opendatastructures.org/ods-python/2_6_RootishArrayStack_Space.html -->
<html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>2.6 RootishArrayStack: A Space-Efficient Array Stack</title>
<meta content="2.6 RootishArrayStack: A Space-Efficient Array Stack" name="description"/>
<meta content="ods-python-html" name="keywords"/>
<meta content="document" name="resource-type"/>
<meta content="global" name="distribution"/>
<meta content="LaTeX2HTML v2008" name="Generator"/>
<meta content="text/css" http-equiv="Content-Style-Type"/>
<link href="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/ods-book.css" rel="STYLESHEET"/>
<link href="http://opendatastructures.org/ods-python/2_7_Discussion_Exercises.html" rel="next"/>
<link href="http://opendatastructures.org/ods-python/2_5_DualArrayDeque_Building.html" rel="previous"/>
<link href="http://opendatastructures.org/ods-python/2_Array_Based_Lists.html" rel="up"/>
<link href="http://opendatastructures.org/ods-python/2_7_Discussion_Exercises.html" rel="next"/>
</head>
<body bgcolor="#FFFFFF" text="#000000">
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<!--End of Table of Child-Links-->
<hr/>
<h1><a name="SECTION00560000000000000000"></a>
<a name="sec:rootisharraystack"></a>
<br/>
<span class="arabic">2</span>.<span class="arabic">6</span> RootishArrayStack: A Space-Efficient Array Stack
</h1>
<p>
<a name="6260"></a>One of the drawbacks of all previous data structures in this chapter is
that, because they store their data in one or two arrays and they avoid
resizing these arrays too often, the arrays frequently are not very full.
For example, immediately after a <!-- MATH
 $\ensuremath{\mathrm{resize}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{resize}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img916.png" width="55"/></span> operation on an ArrayStack,
the backing array <!-- MATH
 $\ensuremath{\ensuremath{\mathit{a}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{a}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img917.png" width="12"/></span> is only half full.  Even worse, there are times
when only one third of <!-- MATH
 $\ensuremath{\ensuremath{\mathit{a}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{a}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img918.png" width="12"/></span> contains data.
</p><p>
In this section, we discuss the RootishArrayStack data structure,
that addresses the problem of wasted space.  The RootishArrayStack
stores <!-- MATH
 $\ensuremath{\ensuremath{\mathit{n}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{n}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img919.png" width="13"/></span> elements using <!-- MATH
 $O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img920.png" width="48"/></span> arrays.  In these arrays, at
most <!-- MATH
 $O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img921.png" width="48"/></span> array locations are unused at any time.  All
remaining array locations are used to store data.  Therefore, these
data structures waste at most <!-- MATH
 $O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img922.png" width="48"/></span> space when storing <!-- MATH
 $\ensuremath{\ensuremath{\mathit{n}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{n}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img923.png" width="13"/></span>
elements.
</p><p>
A RootishArrayStack stores its elements in a list of <!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img924.png" width="10"/></span>
arrays called <span class="textit">blocks</span> that are numbered <!-- MATH
 $0,1,\ldots,\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}-1$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ 0,1,\ldots,\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}-1$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img925.png" width="86"/></span>.
See Figure <a href="http://opendatastructures.org/ods-python/2_6_RootishArrayStack_Space.html#fig:rootisharraystack">2.5</a>.  Block <span class="MATH"><img align="MIDDLE" alt="$ b$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img926.png" width="12"/></span> contains <span class="MATH"><img align="MIDDLE" alt="$ b+1$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img927.png" width="36"/></span> elements.
Therefore, all <!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img928.png" width="10"/></span> blocks contain a total of
</p><p><!-- MATH
 \begin{displaymath}
1+ 2+ 3+\cdots +\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}} = \ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}+1)/2
\end{displaymath}
 -->
</p>
<div align="CENTER" class="mathdisplay">
<img align="MIDDLE" alt="$\displaystyle 1+ 2+ 3+\cdots +\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}...
...nsuremath{\mathit{r}}}}(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}+1)/2
$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img929.png" width="192"/>
</div><p></p>
elements.  The above formula can be obtained as shown in Figure <a href="http://opendatastructures.org/ods-python/2_6_RootishArrayStack_Space.html#fig:gauss">2.6</a>.
<p>
</p><div align="CENTER"><a name="fig:rootisharraystack"></a><a name="10367"></a>
<table>
<caption align="BOTTOM"><strong>Figure 2.5:</strong>
A sequence of <!-- MATH
 $\ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img931.png" width="60"/></span> and <!-- MATH
 $\ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img932.png" width="72"/></span> operations on a
  RootishArrayStack.  Arrows denote elements being copied. </caption>
<tbody><tr><td>
<div align="CENTER">
<img align="BOTTOM" alt="\includegraphics[width=\textwidth ]{figs-python/rootisharraystack}" border="0" height="333" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img930.png" width="550"/>
</div></td></tr>
</tbody></table>
</div>
<p>
<br/>
<img align="BOTTOM" alt="\begin{leftbar}
\begin{flushleft}
\hspace*{1em} \ensuremath{\mathrm{initialize}(...
...ets \ensuremath{\mathrm{\mathrm{ArrayStack}}()}}\\
\end{flushleft}\end{leftbar}" border="0" height="86" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img933.png" width="211"/>
<br/>
</p><p>
</p><div align="CENTER"><a name="fig:gauss"></a><a name="10368"></a>
<table>
<caption align="BOTTOM"><strong>Figure 2.6:</strong>
The number of white squares is <!-- MATH
 $1+2+3+\cdots+\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ 1+2+3+\cdots+\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img935.png" width="113"/></span>.  The number of
  shaded squares is the same.  Together the white and shaded squares make a
  rectangle consisting of <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}+1)$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}+1)$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img936.png" width="51"/></span> squares.</caption>
<tbody><tr><td>
<div align="CENTER">
<img align="BOTTOM" alt="\includegraphics[scale=0.90909]{figs-python/gauss}" border="0" height="181" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img934.png" width="224"/>
</div></td></tr>
</tbody></table>
</div>
<p>
As we might expect, the elements of the list are laid out in order
within the blocks.  The list element with index 0 is stored in block 0,
elements with list indices 1 and 2 are stored in block 1, elements with
list indices 3, 4, and 5 are stored in block 2, and so on.  The main
problem we have to address is that of determining, given an index <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img939.png" width="9"/></span>,
which block contains <!-- MATH
 $\ensuremath{\ensuremath{\mathit{i}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{i}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img940.png" width="9"/></span> as well as the index corresponding to <!-- MATH
 $\ensuremath{\ensuremath{\mathit{i}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{i}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img941.png" width="9"/></span>
within that block.
</p><p>
Determining the index of <!-- MATH
 $\ensuremath{\ensuremath{\mathit{i}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{i}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img942.png" width="9"/></span> within its block turns out to be easy. If
index <!-- MATH
 $\ensuremath{\ensuremath{\mathit{i}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{i}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img943.png" width="9"/></span> is in block <!-- MATH
 $\ensuremath{\ensuremath{\mathit{b}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{b}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img944.png" width="12"/></span>, then the number of elements in blocks
<!-- MATH
 $0,\ldots,\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}-1$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ 0,\ldots,\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}-1$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img945.png" width="73"/></span> is <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}(\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}+1)/2$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}(\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}+1)/2$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img946.png" width="69"/></span>.  Therefore, <!-- MATH
 $\ensuremath{\ensuremath{\mathit{i}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{i}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img947.png" width="9"/></span> is stored at location
</p><p><!-- MATH
 \begin{displaymath}
\ensuremath{\ensuremath{\ensuremath{\mathit{j}}}} = \ensuremath{\ensuremath{\ensuremath{\mathit{i}}}} - \ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}(\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}+1)/2
\end{displaymath}
 -->
</p>
<div align="CENTER" class="mathdisplay">
<img align="MIDDLE" alt="$\displaystyle \ensuremath{\ensuremath{\ensuremath{\mathit{j}}}} = \ensuremath{\...
...nsuremath{\mathit{b}}}}(\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}+1)/2
$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img948.png" width="111"/>
</div><p></p>
within block <!-- MATH
 $\ensuremath{\ensuremath{\mathit{b}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{b}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img949.png" width="12"/></span>.  Somewhat more challenging is the problem of determining
the value of <!-- MATH
 $\ensuremath{\ensuremath{\mathit{b}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{b}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img950.png" width="12"/></span>.  The number of elements that have indices less than
or equal to <!-- MATH
 $\ensuremath{\ensuremath{\mathit{i}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{i}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img951.png" width="9"/></span> is <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}+1$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}+1$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img952.png" width="33"/></span>.  On the other hand, the number of elements
in blocks 0,...,b is <!-- MATH
 $(\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}+1)(\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}+2)/2$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ (\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}+1)(\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}+2)/2$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img953.png" width="104"/></span>.  Therefore, <!-- MATH
 $\ensuremath{\ensuremath{\mathit{b}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{b}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img954.png" width="12"/></span> is the smallest
integer such that
<p><!-- MATH
 \begin{displaymath}
(\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}+1)(\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}+2)/2 \ge \ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}+1 \enspace .
\end{displaymath}
 -->
</p>
<div align="CENTER" class="mathdisplay">
<img align="MIDDLE" alt="$\displaystyle (\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}+1)(\ensuremath...
...{b}}}}+2)/2 \ge \ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}+1 \enspace .
$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img955.png" width="162"/>
</div><p></p>
We can rewrite this equation as
<p><!-- MATH
 \begin{displaymath}
\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}^2 + 3\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}} - 2\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}} \ge  0 \enspace .
\end{displaymath}
 -->
</p>
<div align="CENTER" class="mathdisplay">
<img align="MIDDLE" alt="$\displaystyle \ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}^2 + 3\ensuremat...
...it{b}}}} - 2\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}} \ge 0 \enspace .
$" border="0" height="37" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img956.png" width="118"/>
</div><p></p>
The corresponding quadratic equation <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}^2 + 3\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}} - 2\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}} =  0$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}^2 + 3\ensuremath{\ensuremath...
...suremath{\mathit{b}}}} - 2\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}} = 0$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img957.png" width="106"/></span> has two
solutions: <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}=(-3 + \sqrt{9+8\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}}) / 2$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}=(-3 + \sqrt{9+8\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}}) / 2$" border="0" height="38" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img958.png" width="138"/></span> and <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}=(-3 - \sqrt{9+8\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}}) / 2$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}=(-3 - \sqrt{9+8\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}}) / 2$" border="0" height="38" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img959.png" width="137"/></span>.
The second solution makes no sense in our application since it always
gives a negative value. Therefore, we obtain the solution <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}} = (-3 +
\sqrt{9+8i}) / 2$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{b}}}} = (-3 +
\sqrt{9+8i}) / 2$" border="0" height="38" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img960.png" width="139"/></span>.  In general, this solution is not an integer, but
going back to our inequality, we want the smallest integer <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{b}}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img961.png" width="12"/></span> such that 
<!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}} \ge (-3 + \sqrt{9+8i}) / 2$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{b}}}} \ge (-3 + \sqrt{9+8i}) / 2$" border="0" height="38" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img962.png" width="139"/></span>.  This is simply
<p><!-- MATH
 \begin{displaymath}
\ensuremath{\ensuremath{\ensuremath{\mathit{b}}}} = \left\lceil(-3 + \sqrt{9+8i}) / 2\right\rceil \enspace .
\end{displaymath}
 -->
</p>
<div align="CENTER" class="mathdisplay">
<img align="MIDDLE" alt="$\displaystyle \ensuremath{\ensuremath{\ensuremath{\mathit{b}}}} = \left\lceil(-3 + \sqrt{9+8i}) / 2\right\rceil \enspace .
$" border="0" height="40" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img963.png" width="164"/>
</div><p></p>
<p>
<br/>
<img align="BOTTOM" alt="\begin{leftbar}
\begin{flushleft}
\hspace*{1em} \ensuremath{\mathrm{i2b}(\ensure...
... \ensuremath{\mathit{i}})}) / \ensuremath{2.0})}\\
\end{flushleft}\end{leftbar}" border="0" height="70" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img964.png" width="363"/>
<br/>
</p><p>
With this out of the way, the <!-- MATH
 $\ensuremath{\mathrm{get}(\ensuremath{\mathit{i}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{get}(\ensuremath{\mathit{i}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img965.png" width="41"/></span> and <!-- MATH
 $\ensuremath{\mathrm{set}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{set}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img966.png" width="53"/></span> methods are straightforward.  We first compute the appropriate block <!-- MATH
 $\ensuremath{\ensuremath{\mathit{b}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{b}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img967.png" width="12"/></span> and the appropriate index <!-- MATH
 $\ensuremath{\ensuremath{\mathit{j}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{j}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img968.png" width="9"/></span> within the block and then perform the appropriate operation:
</p><p>
<br/>
<img align="BOTTOM" alt="\begin{leftbar}
\begin{flushleft}
\hspace*{1em} \ensuremath{\mathrm{get}(\ensure...
...bf{return}} \ensuremath{\ensuremath{\mathit{y}}}\\
\end{flushleft}\end{leftbar}" border="0" height="239" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img969.png" width="209"/>
<br/>
</p><p>
If we use any of the data structures in this chapter for representing the <!-- MATH
 $\ensuremath{\ensuremath{\mathit{blocks}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{blocks}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img970.png" width="44"/></span> list, then <!-- MATH
 $\ensuremath{\mathrm{get}(\ensuremath{\mathit{i}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{get}(\ensuremath{\mathit{i}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img971.png" width="41"/></span> and <!-- MATH
 $\ensuremath{\mathrm{set}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{set}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img972.png" width="53"/></span> will each run in constant time.
</p><p>
The <!-- MATH
 $\ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img973.png" width="60"/></span> method will, by now, look familiar.  We first check
to see if our data structure is full, by checking if the number of
blocks, <!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img974.png" width="10"/></span>, is such that <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}+1)/2 = \ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}+1)/2 = \ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img975.png" width="93"/></span>. If so, we call <!-- MATH
 $\ensuremath{\mathrm{grow}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{grow}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img976.png" width="50"/></span>
to add another block.  With this done, we shift elements with indices
<!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}},\ldots,\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}-1$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{i}}}},\ldots,\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}-1$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img977.png" width="70"/></span> to the right by one position to make room for the
new element with index <!-- MATH
 $\ensuremath{\ensuremath{\mathit{i}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{i}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img978.png" width="9"/></span>:
</p><p>
<br/>
<img align="BOTTOM" alt="\begin{leftbar}
\begin{flushleft}
\hspace*{1em} \ensuremath{\mathrm{add}(\ensure...
...nsuremath{\mathit{i}}, \ensuremath{\mathit{x}})}\\
\end{flushleft}\end{leftbar}" border="0" height="163" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img979.png" width="304"/>
<br/>
</p><p>
The <!-- MATH
 $\ensuremath{\mathrm{grow}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{grow}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img980.png" width="50"/></span> method does what we expect. It adds a new block:
</p><p>
<br/>
<img align="BOTTOM" alt="\begin{leftbar}
\begin{flushleft}
\hspace*{1em} \ensuremath{\mathrm{grow}()}\\
...
...ensuremath{\mathit{blocks}}.\mathrm{size}()+1}))\\
\end{flushleft}\end{leftbar}" border="0" height="67" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img981.png" width="354"/>
<br/>
</p><p>
Ignoring the cost of the <!-- MATH
 $\ensuremath{\mathrm{grow}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{grow}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img982.png" width="50"/></span> operation, the cost of an <!-- MATH
 $\ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img983.png" width="60"/></span>
operation is dominated by the cost of shifting and is therefore
<!-- MATH
 $O(1+\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}-\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}})$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ O(1+\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}-\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}})$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img984.png" width="80"/></span>, just like an ArrayStack.
</p><p>
The <!-- MATH
 $\ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img985.png" width="72"/></span> operation is similar to <!-- MATH
 $\ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img986.png" width="60"/></span>.  It shifts the
elements with indices <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}+1,\ldots,\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{i}}}}+1,\ldots,\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}$" border="0" height="30" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img987.png" width="70"/></span> left by one position and then,
if there is more than one empty block, it calls the <!-- MATH
 $\ensuremath{\mathrm{shrink}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{shrink}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img988.png" width="60"/></span> method
to remove all but one of the unused blocks:
</p><p>
<br/>
<img align="BOTTOM" alt="\begin{leftbar}
\begin{flushleft}
\hspace*{1em} \ensuremath{\mathrm{remove}(\ens...
...bf{return}} \ensuremath{\ensuremath{\mathit{x}}}\\
\end{flushleft}\end{leftbar}" border="0" height="178" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img989.png" width="305"/>
<br/>
<br/>
<img align="BOTTOM" alt="\begin{leftbar}
\begin{flushleft}
\hspace*{1em} \ensuremath{\mathrm{shrink}()}\\...
... \gets \ensuremath{\ensuremath{\mathit{r}} - 1}}\\
\end{flushleft}\end{leftbar}" border="0" height="120" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img990.png" width="327"/>
<br/>
</p><p>
Once again, ignoring the cost of the <!-- MATH
 $\ensuremath{\mathrm{shrink}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{shrink}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img991.png" width="60"/></span> operation, the cost of
a <!-- MATH
 $\ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img992.png" width="72"/></span> operation is dominated by the cost of shifting  and is
therefore <!-- MATH
 $O(\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}-\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}})$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ O(\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}-\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}})$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img993.png" width="56"/></span>.
</p><p>
</p><h2><a name="SECTION00561000000000000000">
<span class="arabic">2</span>.<span class="arabic">6</span>.<span class="arabic">1</span> Analysis of Growing and Shrinking</a>
</h2>
<p>
The above analysis of <!-- MATH
 $\ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img994.png" width="60"/></span> and <!-- MATH
 $\ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img995.png" width="72"/></span> does not account for
the cost of <!-- MATH
 $\ensuremath{\mathrm{grow}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{grow}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img996.png" width="50"/></span> and <!-- MATH
 $\ensuremath{\mathrm{shrink}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{shrink}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img997.png" width="60"/></span>.  Note that, unlike the
<!-- MATH
 $\ensuremath{\mathrm{ArrayStack}.\mathrm{resize}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{ArrayStack}.\mathrm{resize}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img998.png" width="137"/></span> operation, <!-- MATH
 $\ensuremath{\mathrm{grow}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{grow}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img999.png" width="50"/></span> and <!-- MATH
 $\ensuremath{\mathrm{shrink}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{shrink}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1000.png" width="60"/></span> do not copy
any data.  They only allocate or free an array of size <!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1001.png" width="10"/></span>.  In
some environments, this takes only constant time, while in others, it
may require time proportional to <!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1002.png" width="10"/></span>.
</p><p>
We note that, immediately after a call to <!-- MATH
 $\ensuremath{\mathrm{grow}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{grow}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1003.png" width="50"/></span> or <!-- MATH
 $\ensuremath{\mathrm{shrink}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{shrink}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1004.png" width="60"/></span>, the
situation is clear. The final block is completely empty, and all other
blocks are completely full.  Another call to <!-- MATH
 $\ensuremath{\mathrm{grow}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{grow}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1005.png" width="50"/></span> or <!-- MATH
 $\ensuremath{\mathrm{shrink}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{shrink}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1006.png" width="60"/></span> will
not happen until at least <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}-1$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}-1$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1007.png" width="34"/></span> elements have been added or removed.
Therefore, even if <!-- MATH
 $\ensuremath{\mathrm{grow}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{grow}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1008.png" width="50"/></span> and <!-- MATH
 $\ensuremath{\mathrm{shrink}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{shrink}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1009.png" width="60"/></span> take <!-- MATH
 $O(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}})$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ O(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}})$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1010.png" width="34"/></span> time, this
cost can be amortized over at least <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}-1$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}-1$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1011.png" width="34"/></span> <!-- MATH
 $\ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1012.png" width="60"/></span> or <!-- MATH
 $\ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1013.png" width="72"/></span>
operations, so that the amortized cost of <!-- MATH
 $\ensuremath{\mathrm{grow}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{grow}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1014.png" width="50"/></span> and <!-- MATH
 $\ensuremath{\mathrm{shrink}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{shrink}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1015.png" width="60"/></span> is
<span class="MATH"><img align="MIDDLE" alt="$ O(1)$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1016.png" width="36"/></span> per operation.
</p><p>
</p><h2><a name="SECTION00562000000000000000"></a>
<a name="sec:rootishspaceusage"></a>
<br/>
<span class="arabic">2</span>.<span class="arabic">6</span>.<span class="arabic">2</span> Space Usage
</h2>
<p>
Next, we analyze the amount of extra space used by a RootishArrayStack.
In particular, we want to count any space used by a RootishArrayStack that is not an array element currently used to hold a list element.  We call all such space <span class="textit">wasted space</span>.
<a name="6659"></a>
</p><p>
The <!-- MATH
 $\ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1017.png" width="72"/></span> operation ensures that a RootishArrayStack never has
more than two blocks that are not completely full.  The number of blocks,
<!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1018.png" width="10"/></span>, used by a RootishArrayStack that stores <!-- MATH
 $\ensuremath{\ensuremath{\mathit{n}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{n}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1019.png" width="13"/></span> elements therefore
satisfies
</p><p><!-- MATH
 \begin{displaymath}
(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}-2)(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}-1) \le \ensuremath{\ensuremath{\ensuremath{\mathit{n}}}} \enspace .
\end{displaymath}
 -->
</p>
<div align="CENTER" class="mathdisplay">
<img align="MIDDLE" alt="$\displaystyle (\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}-2)(\ensuremath...
...thit{r}}}}-1) \le \ensuremath{\ensuremath{\ensuremath{\mathit{n}}}} \enspace .
$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1020.png" width="124"/>
</div><p></p>
Again, using the quadratic equation on this gives
<p><!-- MATH
 \begin{displaymath}
\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}} \le (3+\sqrt{1+4\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})/2 = O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}) \enspace .
\end{displaymath}
 -->
</p>
<div align="CENTER" class="mathdisplay">
<img align="MIDDLE" alt="$\displaystyle \ensuremath{\ensuremath{\ensuremath{\mathit{r}}}} \le (3+\sqrt{1+...
...}})/2 = O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}) \enspace .
$" border="0" height="40" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1021.png" width="204"/>
</div><p></p>
The last two blocks have sizes <!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1022.png" width="10"/></span> and <!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}-1}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}-1}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1023.png" width="34"/></span>, so the space wasted by these
two blocks is at most <!-- MATH
 $2\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}-1 = O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ 2\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}-1 = O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1024.png" width="105"/></span>.  If we store the blocks
in (for example) an ArrayStack, then the amount of space wasted by the
List that stores those <!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1025.png" width="10"/></span> blocks is also <!-- MATH
 $O(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}})=O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ O(\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}})=O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1026.png" width="96"/></span>.  The
other space needed for storing <!-- MATH
 $\ensuremath{\ensuremath{\mathit{n}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{n}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1027.png" width="13"/></span> and other accounting information is <span class="MATH"><img align="MIDDLE" alt="$ O(1)$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1028.png" width="36"/></span>.
Therefore, the total amount of wasted space in a RootishArrayStack
is <!-- MATH
 $O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1029.png" width="48"/></span>.
<p>
Next, we argue that this space usage is optimal for any data structure
that starts out empty and can support the addition of one item at
a time. More precisely, we will show that, at some point during the
addition of <!-- MATH
 $\ensuremath{\ensuremath{\mathit{n}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{n}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1030.png" width="13"/></span> items, the data structure is wasting an amount of space
at least in <!-- MATH
 $\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1031.png" width="25"/></span> (though it may be only wasted for a moment).
</p><p>
Suppose we start with an empty data structure and we add <!-- MATH
 $\ensuremath{\ensuremath{\mathit{n}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{n}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1032.png" width="13"/></span> items one
at a time.  At the end of this process, all <!-- MATH
 $\ensuremath{\ensuremath{\mathit{n}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{n}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1033.png" width="13"/></span> items are stored in
the structure and distributed among a collection of <!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1034.png" width="10"/></span> memory blocks.
If <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}\ge \sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{r}}}}\ge \sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1035.png" width="49"/></span>, then the data structure must be using <!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1036.png" width="10"/></span>
pointers (or references) to keep track of these <!-- MATH
 $\ensuremath{\ensuremath{\mathit{r}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{r}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1037.png" width="10"/></span> blocks, and these
pointers are wasted space.  On the other hand, if <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}} < \sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{r}}}} &lt; \sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1038.png" width="48"/></span>
then, by the pigeonhole principle, some block must have a size of at
least <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}/\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}} > \sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}/\ensuremath{\ensuremath{\ensuremath{\mathit{r}}}} &gt; \sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1039.png" width="63"/></span>.  Consider the moment at which this block
was first allocated.  Immediately after it was allocated, this block
was empty, and was therefore wasting <!-- MATH
 $\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1040.png" width="25"/></span> space.  Therefore,
at some point in time during the insertion of <!-- MATH
 $\ensuremath{\ensuremath{\mathit{n}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{n}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1041.png" width="13"/></span> elements, the data
structure was wasting <!-- MATH
 $\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}}$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1042.png" width="25"/></span> space.
</p><p>
</p><h2><a name="SECTION00563000000000000000">
<span class="arabic">2</span>.<span class="arabic">6</span>.<span class="arabic">3</span> Summary</a>
</h2>
<p>
The following theorem summarizes our discussion of the RootishArrayStack
data structure:
</p><p>
</p><p>
</p><div><a name="thm:rootisharraystack"><b>Theorem  <span class="arabic">2</span>..<span class="arabic">5</span></b></a>   
<i>A RootishArrayStack implements the List interface.  Ignoring the cost of
  calls to <!-- MATH
 $\ensuremath{\mathrm{grow}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{grow}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1043.png" width="50"/></span> and <!-- MATH
 $\ensuremath{\mathrm{shrink}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{shrink}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1044.png" width="60"/></span>, a RootishArrayStack supports the operations
  </i>
<ul>
<li><!-- MATH
 $\ensuremath{\mathrm{get}(\ensuremath{\mathit{i}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{get}(\ensuremath{\mathit{i}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1045.png" width="41"/></span> and <!-- MATH
 $\ensuremath{\mathrm{set}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{set}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1046.png" width="53"/></span> in <span class="MATH"><img align="MIDDLE" alt="$ O(1)$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1047.png" width="36"/></span> time per operation; and
</li>
<li><!-- MATH
 $\ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1048.png" width="60"/></span> and <!-- MATH
 $\ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1049.png" width="72"/></span> in <!-- MATH
 $O(1+\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}-\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}})$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ O(1+\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}-\ensuremath{\ensuremath{\ensuremath{\mathit{i}}}})$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1050.png" width="80"/></span> time per operation.
  
</li>
</ul><i>
  Furthermore, beginning with an empty RootishArrayStack, any sequence of <span class="MATH"><img align="MIDDLE" alt="$ m$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1051.png" width="17"/></span>
<!-- MATH
 $\ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{add}(\ensuremath{\mathit{i}},\ensuremath{\mathit{x}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1052.png" width="60"/></span> and <!-- MATH
 $\ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{remove}(\ensuremath{\mathit{i}})}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1053.png" width="72"/></span> operations results in a total of <span class="MATH"><img align="MIDDLE" alt="$ O(m)$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1054.png" width="40"/></span>
  time spent during all calls to <!-- MATH
 $\ensuremath{\mathrm{grow}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{grow}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1055.png" width="50"/></span> and <!-- MATH
 $\ensuremath{\mathrm{shrink}()}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\mathrm{shrink}()}$" border="0" height="31" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1056.png" width="60"/></span>.
</i>
<p>
<i>The space (measured in words)<a href="http://opendatastructures.org/ods-python/2_6_RootishArrayStack_Space.html#foot8298" name="tex2html24"><sup><span class="arabic">2</span>.<span class="arabic">2</span></sup></a> used by a RootishArrayStack
  that stores <!-- MATH
 $\ensuremath{\ensuremath{\mathit{n}}}$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\mathit{n}}}$" border="0" height="29" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1057.png" width="13"/></span> elements is <!-- MATH
 $\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}} +O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$
 -->
<span class="MATH"><img align="MIDDLE" alt="$ \ensuremath{\ensuremath{\ensuremath{\mathit{n}}}} +O(\sqrt{\ensuremath{\ensuremath{\ensuremath{\mathit{n}}}}})$" border="0" height="35" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/img1058.png" width="73"/></span>.</i></p></div><p></p>
<p>
</p><p>
<br/></p><hr/><h4>Footnotes</h4>
<dl>
<dt><a name="foot8298">... words)</a><a href="http://opendatastructures.org/ods-python/2_6_RootishArrayStack_Space.html#tex2html24"><sup><span class="arabic">2</span>.<span class="arabic">2</span></sup></a></dt>
<dd>Recall Section <a href="http://opendatastructures.org/ods-python/1_4_Model_Computation.html#sec:model">1.4</a> for a
  discussion of how memory is measured.
</dd>
</dl>
<!--End of Navigation Panel-->
<address>
<a href="http://opendatastructures.org/">opendatastructures.org</a>
<script async="" src="static/2.6 RootishArrayStack_ A Space-Efficient Array Stack_files/ga.js" type="text/javascript"></script><script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-5860680-3']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript';ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
</address>
</body></html>